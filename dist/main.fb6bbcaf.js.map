{"version":3,"sources":["js/view.js","js/model.js","js/utils.js","js/game.js","js/main.js","../../../../Programs/nvm/nvm/v12.16.1/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["COUNTER_NEG","cNEG","COUNTER_SRC","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","FACE_BASE","FACE_LOST","FACE_WON","View","model","globalOptions","tileSize","calculateTileSize","playground","document","getElementById","face","controls","style","setProperty","cols","rows","firstChild","removeChild","setNumber","Counters","MINES","mineCount","initViewListeners","listeners","onPlaygroundClick","bind","onPlaygroundRightClick","onResize","addEventListener","window","event","resize","preventDefault","dispatch","locateClickFromEvent","eventName","detail","CustomEvent","dispatchEvent","box","getBoundingClientRect","translationX","clientX","left","translationY","clientY","top","row","Math","floor","col","console","log","x","y","map","forEach","adjacent","setTile","Tiles","NUMBER","tileType","n","qs","querySelector","tile","createElement","classList","add","dataset","gridColumn","gridRow","FLAG","MARK","MINE","MINE_BOOM","INCORRECT_MINE","replaceWith","appendChild","lostCoords","isMine","isFlagged","which","error","counter","TIME","isNegative","src","sizeBaseline","mainCont","uiWidth","clientWidth","uiHeight","clientHeight","maxHeight","body","maxWidth","size","min","removeEventListener","EventTarget","Object","getPrototypeOf","Model","mines","length","parseField","field","mineList","markedFlags","view","fld","lst","c","i","FieldFlags","push","undefined","REVEALED","isRecursive","Error","isRevealed","getAdjacentCount","concat","revealTile","revealed","revealMap","dropFlag","dropTile","MarkTypes","UNKNOWN","FLAGGED","MARKED","UNMARKED","count","_revealed","randomInt","max","random","DEFAULT_GLOBAL_OPTIONS","freeze","marks","Game","generateMines","bindView","gameStarted","interactuable","initListeners","startTimer","stopTimer","timerOn","timerStart","performance","now","setTimeout","doTimer","nextTimer","startGame","stopGame","gameLost","isComplete","gameWon","getTileType","markTileFlag","markTile","unmarkTile","destroy","rowCount","colCount","rnd","includes","GAME_MODES","gi","difficulty","g","params","assign","game","newGame","call","changeDifficulty","remove","toggleMarks","toggle","Array","from","querySelectorAll","li","contains","l","target","action","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","stack","overlay","createErrorOverlay","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.fb6bbcaf.js","sourceRoot":"..\\src","sourcesContent":["import c0   from \"../static/number_0.gif\";\r\nimport c1   from \"../static/number_1.gif\";\r\nimport c2   from \"../static/number_2.gif\";\r\nimport c3   from \"../static/number_3.gif\";\r\nimport c4   from \"../static/number_4.gif\";\r\nimport c5   from \"../static/number_5.gif\";\r\nimport c6   from \"../static/number_6.gif\";\r\nimport c7   from \"../static/number_7.gif\";\r\nimport c8   from \"../static/number_8.gif\";\r\nimport c9   from \"../static/number_9.gif\";\r\nimport cNEG from \"../static/number_neg.gif\";\r\nconst COUNTER_NEG = cNEG;\r\nconst COUNTER_SRC = [ c0, c1, c2, c3, c4, c5, c6, c7, c8, c9 ];\r\n\r\nconst FACE_BASE = \"0px\";\r\nconst FACE_LOST = \"-80px\";\r\nconst FACE_WON = \"-120px\";\r\n\r\nclass View extends EventTarget {\r\n    constructor({ model, globalOptions }) {\r\n        super();\r\n\r\n        this.globalOptions = globalOptions;\r\n        this.model = model;\r\n        this.tileSize = this.calculateTileSize();\r\n\r\n        this.playground = document.getElementById(\"playground\");\r\n        this.face = document.getElementById(\"face-button\");\r\n        this.controls = document.getElementById(\"controls\");\r\n\r\n        this.controls.style.setProperty(\"--face-position\", FACE_BASE);\r\n\r\n        this.playground.style.setProperty(\"--cols\", this.model.cols);\r\n        this.playground.style.setProperty(\"--rows\", this.model.rows);\r\n\r\n        this.playground.style.setProperty(\"--tile-size\", this.tileSize + \"px\");\r\n\r\n        while (this.playground.firstChild) {\r\n            this.playground.removeChild(this.playground.firstChild);\r\n        }\r\n\r\n        this.setNumber(View.Counters.MINES, this.model.mineCount);\r\n\r\n        this.initViewListeners();\r\n    }\r\n\r\n    initViewListeners() {\r\n        this.listeners = [\r\n            this.onPlaygroundClick.bind(this),\r\n            this.onPlaygroundRightClick.bind(this),\r\n            this.onResize.bind(this),\r\n        ];\r\n        this.playground.addEventListener(\"click\", this.listeners[0]);\r\n        this.playground.addEventListener(\"contextmenu\", this.listeners[1]);\r\n        window.addEventListener(\"resize\", this.listeners[2]);\r\n    }\r\n\r\n    onResize(event) {\r\n        if (this.globalOptions.resize) {\r\n            this.tileSize = this.calculateTileSize();\r\n            this.playground.style.setProperty(\"--tile-size\", this.tileSize + \"px\");\r\n        }\r\n    }\r\n\r\n    onPlaygroundClick(event) {\r\n        event.preventDefault();\r\n        this.dispatch(\"click\", this.locateClickFromEvent(event));\r\n    }\r\n\r\n    onPlaygroundRightClick(event) {\r\n        event.preventDefault();\r\n        this.dispatch(\"rightClick\", this.locateClickFromEvent(event));\r\n    }\r\n\r\n    dispatch(eventName, detail) {\r\n        let event = new CustomEvent(eventName, {\r\n            detail,\r\n        });\r\n        this.dispatchEvent(event);\r\n    }\r\n\r\n    locateClickFromEvent(event) {\r\n        let box = this.playground.getBoundingClientRect();\r\n        let translationX = event.clientX - box.left;\r\n        let translationY = event.clientY - box.top;\r\n        let row = Math.floor(translationY / this.tileSize);\r\n        let col = Math.floor(translationX / this.tileSize);\r\n\r\n        console.log(`Click en {${col},${row}}`)\r\n        return {\r\n            x: col,\r\n            y: row,\r\n        };\r\n    }\r\n\r\n    revealMap(map) {\r\n        // map = [ {x, y, adjacent } ]\r\n        map.forEach(({ x, y, adjacent}) => this.setTile(x, y, View.Tiles.NUMBER, adjacent));\r\n    }\r\n    setTile(x, y, tileType, n) {\r\n        let qs = this.playground.querySelector(`[data-row=\"${y}\"][data-col=\"${x}\"]`);\r\n\r\n        let tile = document.createElement(\"i\");\r\n        tile.classList.add(\"tile\");\r\n        tile.dataset.row = y;\r\n        tile.dataset.col = x;\r\n        tile.style.gridColumn = x + 1; // grid is 1-indexed\r\n        tile.style.gridRow = y + 1;\r\n        switch (tileType) {\r\n            case View.Tiles.FLAG:\r\n                tile.classList.add(\"flag\");\r\n            break;\r\n            case View.Tiles.MARK:\r\n                tile.classList.add(\"mark\");\r\n            break;\r\n            case View.Tiles.NUMBER:\r\n                tile.classList.add(`number-${n}`);\r\n            break;\r\n            case View.Tiles.MINE:\r\n                tile.classList.add(\"mine\");\r\n            break;\r\n            case View.Tiles.MINE_BOOM:\r\n                tile.classList.add(\"mine-exploded\");\r\n            break;\r\n            case View.Tiles.INCORRECT_MINE:\r\n                tile.classList.add(\"incorrect-mine\");\r\n            break;\r\n        }\r\n        \r\n        if (qs) {\r\n            qs.replaceWith(tile);\r\n        } else {\r\n            this.playground.appendChild(tile);\r\n        }\r\n    }\r\n\r\n    dropTile(x, y) {\r\n        let qs = this.playground.querySelector(`[data-row=\"${y}\"][data-col=\"${x}\"]`);\r\n        if (qs) {\r\n            this.playground.removeChild(qs);\r\n        }\r\n    }\r\n\r\n    // ¿No necesita la view una referencia al model?\r\n    gameLost(lostCoords) {\r\n        this.controls.style.setProperty(\"--face-position\", FACE_LOST);\r\n        for (let x = 0; x < this.model.cols; x++) {\r\n            for (let y = 0; y < this.model.rows; y++) {\r\n                console.log(x + \"-\" + y + \"-\" + this.model.isMine(x, y) + \"-\" + this.model.isFlagged(x, y));\r\n                if (this.model.isMine(x, y) && !this.model.isFlagged(x, y)) {\r\n                    this.setTile(\r\n                        x,\r\n                        y,\r\n                        lostCoords.x === x && lostCoords.y === y ? View.Tiles.MINE_BOOM : View.Tiles.MINE\r\n                    );\r\n                } else if (this.model.isMine(x, y) && this.model.isFlagged(x, y)) {\r\n                    this.setTile(x, y, View.Tiles.INCORRECT_MINE);\r\n                }\r\n            }\r\n        }\r\n        // for (let minePos of this.model.mineList) {\r\n        //     this.setTile(\r\n        //         minePos.x,\r\n        //         minePos.y,\r\n        //         lostCoords.x === minePos.x && lostCoords.y === minePos.y ? View.Tiles.MINE_BOOM : View.Tiles.MINE\r\n        //     );\r\n        // }\r\n    }\r\n\r\n    gameWon() {\r\n        this.controls.style.setProperty(\"--face-position\", FACE_WON);\r\n    }\r\n\r\n    setNumber(which, n) {\r\n        if (n >= 1000 || n <= -1000) {\r\n            console.error(`setNumber(${which}, ${n}): n too big`);\r\n            n = n % 1000;\r\n        }\r\n\r\n        let counter;\r\n        switch (which) {\r\n            case View.Counters.MINES:\r\n                counter = document.getElementById(\"mine-counter\");\r\n            break;\r\n            case View.Counters.TIME:\r\n                counter = document.getElementById(\"time-counter\");\r\n            break;\r\n        }\r\n\r\n        let isNegative = false;\r\n        if (n < 0) {\r\n            isNegative = true;\r\n            n *= -1;\r\n        }\r\n        counter.querySelector(`img:nth-child(1)`).src = isNegative ? COUNTER_NEG : COUNTER_SRC[Math.floor(n / 100)];\r\n        counter.querySelector(`img:nth-child(2)`).src = COUNTER_SRC[Math.floor((n % 100) / 10)];\r\n        counter.querySelector(`img:nth-child(3)`).src = COUNTER_SRC[Math.floor(n % 10)];\r\n    }\r\n\r\n    calculateTileSize() {\r\n        if (!View.sizeBaseline) {\r\n            let mainCont = document.getElementById(\"full-container\");\r\n            let controls = document.getElementById(\"controls\");\r\n    \r\n            View.sizeBaseline = {\r\n                uiWidth: controls.clientWidth - mainCont.clientWidth,\r\n                uiHeight: -mainCont.clientHeight,\r\n            };\r\n        }\r\n\r\n        // Height uses mainCont height\r\n        let maxHeight = document.body.clientHeight + View.sizeBaseline.uiHeight;\r\n        // But width is just the borders... so CONTAINER - Controls-width\r\n        let maxWidth = document.body.clientWidth + View.sizeBaseline.uiWidth;\r\n\r\n        let size = Math.min(maxWidth / this.model.cols, maxHeight / this.model.rows);\r\n\r\n        // floor...?\r\n        size = Math.floor(size);\r\n\r\n        return size;\r\n    }\r\n\r\n    destroy() {\r\n        this.playground.removeEventListener(\"click\", this.listeners[0]);\r\n        this.playground.removeEventListener(\"contextmenu\", this.listeners[1]);\r\n        window.removeEventListener(\"resize\", this.listeners[2]);\r\n    }\r\n}\r\n\r\nObject.getPrototypeOf(View).Tiles = {\r\n    FLAG: 0,\r\n    MARK: 1,\r\n    NUMBER: 2,\r\n    MINE: 3,\r\n    MINE_BOOM: 4,\r\n    INCORRECT_MINE: 5,\r\n};\r\n\r\nObject.getPrototypeOf(View).Counters = {\r\n    MINES: 0,\r\n    TIME: 1,\r\n};\r\n\r\nexport { View };","import { View } from './view';\r\n\r\nclass Model {\r\n\r\n    constructor({ cols, rows, mines }) {\r\n        this.cols = cols;\r\n        this.rows = rows;\r\n        this.mineCount = mines.length;\r\n        [ this.field, this.mineList ] = this.parseField(mines);\r\n        console.log(this.field);\r\n        console.log(this.mineList);\r\n\r\n        // Intermediate - could be inferred from this.field to avoid mishaps\r\n        this.markedFlags = 0;\r\n    }\r\n\r\n    bindView(view) {\r\n        this.view = view;\r\n    }\r\n\r\n    get revealed() {\r\n        return this._revealed || 0;\r\n    }\r\n\r\n    set revealed(n) {\r\n        if (!this._revealed) this._revealed = 0;\r\n        this._revealed += n;\r\n    }\r\n\r\n    parseField(mines) {\r\n        let fld = {};\r\n        let lst = [];\r\n        for (let c = 0; c < this.cols; c++) {\r\n            fld[c] = {};\r\n        }\r\n\r\n        for (let i of mines) {\r\n            // i = y*rows + x;\r\n            let y = Math.floor(i / this.cols);\r\n            let x = i - this.cols * y;\r\n            fld[x][y] = Model.FieldFlags.MINE;\r\n            lst.push({ x, y });\r\n        }\r\n        return [ fld, lst ];\r\n    }\r\n\r\n    isMine(x, y) {\r\n        return this.field[x][y] !== undefined && (this.field[x][y] & Model.FieldFlags.MINE) > 0;\r\n    }\r\n\r\n    isRevealed(x, y) {\r\n        return this.field[x][y] !== undefined && (this.field[x][y] & Model.FieldFlags.REVEALED) > 0;\r\n    }\r\n\r\n    isFlagged(x, y) {\r\n        return this.field[x][y] !== undefined && (this.field[x][y] & Model.FieldFlags.FLAG) > 0;\r\n    }\r\n\r\n    // isRecursive haces las veces de flagholder\r\n    revealTile(x, y, isRecursive) {\r\n        if (this.isMine(x, y)) { throw new Error(\"Mine\"); }\r\n        if (this.isRevealed(x, y) || this.isFlagged(x, y)) { return []; }\r\n        let map = [];\r\n        let adjacent = this.getAdjacentCount(x, y);\r\n        map.push({ x, y, adjacent });\r\n        this.field[x][y] |= Model.FieldFlags.REVEALED;\r\n\r\n        if (adjacent === 0) {\r\n            // top left\r\n            if (x > 0 && y > 0)                             \r\n                map = map.concat(this.revealTile(x - 1, y - 1, true));\r\n            // top\r\n            if (y > 0)                                      \r\n                map = map.concat(this.revealTile(x,     y - 1, true));\r\n            // top right\r\n            if (y > 0 && x < (this.cols - 1))               \r\n                map = map.concat(this.revealTile(x + 1, y - 1, true));\r\n            // left\r\n            if (x > 0)                                      \r\n                map = map.concat(this.revealTile(x - 1, y,     true));\r\n            // right\r\n            if (x < (this.cols - 1))                        \r\n                map = map.concat(this.revealTile(x + 1, y,     true));\r\n            // bottom left\r\n            if (x > 0 && y < (this.rows - 1))               \r\n                map = map.concat(this.revealTile(x - 1, y + 1, true));\r\n            // bottom\r\n            if (y < (this.rows - 1))                        \r\n                map = map.concat(this.revealTile(x,     y + 1, true));\r\n            // bottom right\r\n            if (x < (this.cols - 1) && y < (this.rows - 1)) \r\n                map = map.concat(this.revealTile(x + 1, y + 1, true));\r\n        }\r\n\r\n        if (!isRecursive) {\r\n            this.revealed = map.length;\r\n            this.view.revealMap(map);\r\n        } else {\r\n            return map;\r\n        }\r\n    }\r\n\r\n    markTileFlag(x, y) {\r\n        this.field[x][y] |= Model.FieldFlags.FLAG;\r\n        this.markedFlags++;\r\n\r\n        this.view.setTile(x, y, View.Tiles.FLAG);\r\n\r\n        // Aquí o en setTile? o en Game?\r\n        this.view.setNumber(View.Counters.MINES, this.mineCount - this.markedFlags);\r\n    }\r\n\r\n    markTile(x, y) {\r\n        // Marks (?) a tile\r\n        this.field[x][y] |= Model.FieldFlags.MARK;\r\n        this.field[x][y] &= ~Model.FieldFlags.FLAG;\r\n\r\n        this.view.setTile(x, y, View.Tiles.MARK);\r\n\r\n        // Always subtract one from markedFlags\r\n        this.markedFlags--;\r\n        this.view.setNumber(View.Counters.MINES, this.mineCount - this.markedFlags);\r\n    }\r\n\r\n    unmarkTile(x, y) {\r\n        // Unmarks a tile. Subtracts from markedFlags only if field.x.y has Model.FieldFlags.FLAG\r\n        let dropFlag = (this.field[x][y] & Model.FieldFlags.FLAG) > 0;\r\n\r\n        this.field[x][y] &= ~Model.FieldFlags.MARK;\r\n        this.field[x][y] &= ~Model.FieldFlags.FLAG;\r\n\r\n        this.view.dropTile(x, y);\r\n\r\n        if (dropFlag) {\r\n            this.markedFlags--;\r\n            this.view.setNumber(View.Counters.MINES, this.mineCount - this.markedFlags);\r\n        }\r\n    }\r\n\r\n    getTileType(x, y) {\r\n        // returns FlagTypes\r\n        // If revealed => unknown (invalid op)\r\n        if (!this.field[x][y]) return Model.MarkTypes.UNKNOWN;\r\n\r\n        if ((this.field[x][y] & Model.FieldFlags.REVEALED) > 0) return Model.MarkTypes.UNKNOWN;\r\n\r\n        if ((this.field[x][y] & Model.FieldFlags.FLAG) > 0) return Model.MarkTypes.FLAGGED;\r\n\r\n        if ((this.field[x][y] & Model.FieldFlags.MARK) > 0) return Model.MarkTypes.MARKED;\r\n\r\n        return Model.MarkTypes.UNMARKED;\r\n    }\r\n\r\n    getAdjacentCount(x, y) {\r\n        let count = 0;\r\n        if (x > 0 && y > 0                             && this.isMine(x - 1, y - 1)) count++;\r\n        if (y > 0                                      && this.isMine(x,     y - 1)) count++;\r\n        if (y > 0 && x < (this.cols - 1)               && this.isMine(x + 1, y - 1)) count++;\r\n        if (x > 0                                      && this.isMine(x - 1, y))     count++;\r\n        if (x < (this.cols - 1)                        && this.isMine(x + 1, y))     count++;\r\n        if (x > 0 && y < (this.rows - 1)               && this.isMine(x - 1, y + 1)) count++;\r\n        if (y < (this.rows - 1)                        && this.isMine(x,     y + 1)) count++;\r\n        if (x < (this.cols - 1) && y < (this.rows - 1) && this.isMine(x + 1, y + 1)) count++;\r\n\r\n        return count;\r\n    }\r\n}\r\n\r\nObject.getPrototypeOf(Model).FieldFlags = {\r\n    MINE:     0b1,\r\n    REVEALED: 0b10,\r\n    FLAG:     0b100,\r\n    MARK:     0b1000,\r\n};\r\n\r\nObject.getPrototypeOf(Model).MarkTypes = {\r\n    UNKNOWN: 0,\r\n    UNMARKED: 1,\r\n    FLAGGED: 2,\r\n    MARKED: 3,\r\n};\r\n\r\nexport { Model };","function randomInt(min, max) {\r\n    return Math.floor(min + Math.random() * (max - min))\r\n}\r\n\r\nexport { randomInt };","import { Model } from './model';\r\nimport { View } from './view';\r\nimport { randomInt } from './utils';\r\n\r\nconst DEFAULT_GLOBAL_OPTIONS = Object.freeze({\r\n    marks: false,\r\n    resize: true,\r\n});\r\n\r\nclass Game {\r\n    constructor({ cols, rows, mineCount, globalOptions, mines = [] }) {\r\n\r\n        if (mines.length === 0) {\r\n            // Generar minas\r\n            mines = Game.generateMines(rows, cols, mineCount);\r\n        }\r\n\r\n        if (!globalOptions) {\r\n            globalOptions = DEFAULT_GLOBAL_OPTIONS;\r\n        }\r\n\r\n        this.globalOptions = globalOptions;\r\n        this.model = new Model({ cols, rows, mines });\r\n        this.view = new View({ globalOptions, cols, rows, model: this.model});\r\n        this.model.bindView(this.view);\r\n\r\n        this.gameStarted = false;\r\n        this.interactuable = true;\r\n\r\n        this.initListeners();\r\n    }\r\n\r\n    initListeners() {\r\n        this.listeners = [\r\n            this.onPlaygroundClick.bind(this),\r\n            this.onPlaygroundRightClick.bind(this),\r\n        ];\r\n        this.view.addEventListener(\"click\", this.listeners[0]);\r\n        this.view.addEventListener(\"rightClick\", this.listeners[1]);\r\n    }\r\n\r\n    startGame() {\r\n        this.gameStarted = true;\r\n        this.startTimer();\r\n    }\r\n\r\n    stopGame() {\r\n        this.interactuable = false;\r\n        this.stopTimer();\r\n    }\r\n\r\n    startTimer() {\r\n        this.timerOn = true;\r\n        this.timerStart = performance.now();\r\n        setTimeout(this.doTimer.bind(this), 1000);\r\n    }\r\n\r\n    stopTimer() {\r\n        this.timerOn = false;\r\n    }\r\n\r\n    doTimer() {\r\n        if (!this.timerOn) return;\r\n        this.view.setNumber(View.Counters.TIME, Math.floor((performance.now() - this.timerStart) / 1000));\r\n        let nextTimer = (performance.now() - this.timerStart) % 1000;\r\n        setTimeout(this.doTimer.bind(this), 1000 - nextTimer);\r\n    }\r\n\r\n    onPlaygroundClick(event) {\r\n        if (!this.interactuable) return false;\r\n        if (!this.gameStarted) {\r\n            this.startGame();\r\n        }\r\n\r\n        if (this.model.isRevealed(event.detail.x, event.detail.y)) {\r\n            return false; // Noop\r\n        }\r\n\r\n        if (this.model.isMine(event.detail.x, event.detail.y)) {\r\n            if (!this.model.isFlagged(event.detail.x, event.detail.y)) {\r\n                this.stopGame();\r\n                this.view.gameLost({ x: event.detail.x, y: event.detail.y });\r\n            }\r\n        } else {\r\n            this.model.revealTile(event.detail.x, event.detail.y);\r\n        }\r\n\r\n        if (this.isComplete()) {\r\n            this.stopGame();\r\n            this.view.gameWon();\r\n        }\r\n    }\r\n    \r\n    onPlaygroundRightClick(event) {\r\n        if (!this.interactuable) return false;\r\n        if (!this.gameStarted) {\r\n            this.startGame();\r\n        }\r\n\r\n        if (this.model.isRevealed(event.detail.x, event.detail.y)) {\r\n            return false; // Noop\r\n        }\r\n\r\n        switch (this.model.getTileType(event.detail.x, event.detail.y)) {\r\n            case Model.MarkTypes.UNMARKED:\r\n            case Model.MarkTypes.UNKNOWN:\r\n                // Just flag\r\n                this.model.markTileFlag(event.detail.x, event.detail.y);\r\n            break;\r\n            case Model.MarkTypes.FLAGGED:\r\n                // Unmark if !global.marks, mark (?) if true\r\n                if (this.globalOptions.marks) {\r\n                    this.model.markTile(event.detail.x, event.detail.y);\r\n                } else {\r\n                    this.model.unmarkTile(event.detail.x, event.detail.y);\r\n                }\r\n            break;\r\n            case Model.MarkTypes.MARKED:\r\n                // Always unmark\r\n                this.model.unmarkTile(event.detail.x, event.detail.y);\r\n            break;\r\n        }\r\n    }\r\n\r\n    isComplete() {\r\n        return this.model.revealed === this.model.cols * this.model.rows - this.model.mineCount;\r\n    }\r\n\r\n    destroy() {\r\n        this.view.removeEventListener(\"click\", this.listeners[0]);\r\n        this.view.removeEventListener(\"rightClick\", this.listeners[1]);\r\n        this.view.destroy();\r\n    }\r\n\r\n    static generateMines(rowCount, colCount, mineCount) {\r\n\r\n        let max = rowCount * colCount - 1;\r\n        let mines = [];\r\n    \r\n        while (mines.length < mineCount) {\r\n            let rnd = randomInt(0, max);\r\n            if (!mines.includes(rnd)) {\r\n                mines.push(rnd);\r\n            }\r\n        }\r\n    \r\n        return mines;\r\n    }\r\n}\r\n\r\nexport { Game };","import { Game } from './game';\r\nconst GAME_MODES = {\r\n    \"Beginner\": {\r\n        rows: 10,\r\n        cols: 10,\r\n        mineCount: 10,\r\n    },\r\n    \"Intermediate\": {\r\n        rows: 16,\r\n        cols: 16,\r\n        mineCount: 40,\r\n    },\r\n    \"Expert\": {\r\n        rows: 16,\r\n        cols: 31,\r\n        mineCount: 99,\r\n    },\r\n    \"Custom\": {\r\n        rows: 1,\r\n        cols: 1,\r\n        mines: 1,\r\n    },\r\n};\r\n\r\nwindow.gi = {};\r\nwindow.globalOptions = {\r\n    marks: true,\r\n    resize: true,\r\n    difficulty: \"Intermediate\",\r\n};\r\n\r\nwindow.addEventListener(\"load\", function() {\r\n    window.g = function() {\r\n        let params = {\r\n            globalOptions: window.globalOptions,\r\n        };\r\n        Object.assign(params, GAME_MODES[window.globalOptions.difficulty]);\r\n        this.game = new Game(params);\r\n    };\r\n\r\n    function newGame() {\r\n        if (window.gi && window.gi.game) {\r\n            window.gi.game.destroy();\r\n        }\r\n        window.gi = {};\r\n        g.call(window.gi);\r\n    }\r\n\r\n    function changeDifficulty(difficulty) {\r\n        document.querySelector(\"li.checked[data-action=change-difficulty]\").classList.remove(\"checked\");\r\n        document.querySelector(`li[data-action=\"change-difficulty\"][data-difficulty=\"${difficulty}\"]`).classList.add(\"checked\");\r\n        window.globalOptions.difficulty = difficulty;\r\n        newGame();\r\n    }\r\n\r\n    function toggleMarks() {\r\n        window.globalOptions.marks = !window.globalOptions.marks;\r\n\r\n        document.querySelector(\"li[data-action=toggle-marks]\").classList.toggle(\"checked\");\r\n    }\r\n\r\n    newGame();\r\n\r\n    document.getElementById(\"face-button\").addEventListener(\"click\", function() {\r\n        newGame();\r\n    });\r\n\r\n    Array.from(document.querySelectorAll(\"#menubar > li\")).forEach(li => {\r\n        li.addEventListener(\"click\", function() {\r\n            if (li.classList.contains(\"open\")) {\r\n                li.classList.remove(\"open\");\r\n            } else {\r\n                Array.from(document.querySelectorAll(\"#menubar > li.open\")).forEach(l => {\r\n                    l.classList.remove(\"open\");\r\n                });\r\n                li.classList.add(\"open\");\r\n            }\r\n        });\r\n    });\r\n\r\n    document.querySelector(\"#menubar\").addEventListener(\"click\", function(event) {\r\n        if (!event.target.dataset.action) { return; }\r\n        switch (event.target.dataset.action) {\r\n            case \"new-game\":\r\n                newGame();\r\n            break;\r\n            case \"change-difficulty\":\r\n                changeDifficulty(event.target.dataset.difficulty);\r\n            break;\r\n            case \"toggle-marks\":\r\n                toggleMarks();\r\n            break;\r\n        }\r\n    });\r\n\r\n    if (window.globalOptions.marks) {\r\n        document.querySelector(\"li[data-action=toggle-marks]\").classList.add(\"checked\");\r\n    }\r\n\r\n    document.querySelector(`li[data-action=\"change-difficulty\"][data-difficulty=\"${window.globalOptions.difficulty}\"]`).classList.add(\"checked\");\r\n});","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}